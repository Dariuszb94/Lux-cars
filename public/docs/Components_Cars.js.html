

<!DOCTYPE html>
<html lang="en">

<head>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title> Components/Cars.js</title>

  <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="./build/entry.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,400,700|Inconsolata,700" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="https://jmblog.github.io/color-themes-for-google-code-prettify/themes/tomorrow-night.min.css">
  <link type="text/css" rel="stylesheet" href="styles/app.min.css">
  <link type="text/css" rel="stylesheet" href="styles/iframe.css">

  <script async defer src="https://buttons.github.io/buttons.js"></script>

  
</head>



<body class="layout small-header">
    <div id="stickyNavbarOverlay"></div>
    

<div class="top-nav">
    <div class="inner">
        <a id="hamburger" role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </a>
        <div class="logo">
            
             
                <a href="index.html">
                    <h1 class="navbar-item">Car dealer</h1>
                </a>
            
        </div>
    </div>
</div>
    <div id="main">
        <div
            class="sidebar "
            id="sidebarNav"
        >
            
            <nav>
                
                    <h2><a href="index.html">Documentation</a></h2><div class="category"><h3>Classes</h3><ul><li><a href="About.html">About</a></li><li><a href="Cars.html">Cars</a></li><li><a href="Contact.html">Contact</a></li><li><a href="ContactForm.html">ContactForm</a></li><li><a href="Finance.html">Finance</a></li><li><a href="FinanceApp.html">FinanceApp</a></li><li><a href="Footer.html">Footer</a></li><li><a href="GetInTouch.html">GetInTouch</a></li><li><a href="Header.html">Header</a></li><li><a href="Home.html">Home</a></li><li><a href="MainSearch.html">MainSearch</a></li><li><a href="Menu.html">Menu</a></li><li><a href="Offer.html">Offer</a></li><li><a href="OpeningHours.html">OpeningHours</a></li><li><a href="QuickLinks.html">QuickLinks</a></li><li><a href="Search.html">Search</a></li><li><a href="SimilarVehicles.html">SimilarVehicles</a></li><li><a href="Slider.html">Slider</a></li><li><a href="Sorter.html">Sorter</a></li><li><a href="SubNavi.html">SubNavi</a></li><li><a href="Touch.html">Touch</a></li><li><a href="UnderSlider.html">UnderSlider</a></li><li><a href="VehicleInfo.html">VehicleInfo</a></li><li><a href="VehicleInfoDescription.html">VehicleInfoDescription</a></li><li><a href="VehicleInfoFeatures.html">VehicleInfoFeatures</a></li><li><a href="VehicleInfoFinances.html">VehicleInfoFinances</a></li></ul><h3>Global</h3><ul><li><a href="global.html#FavouriteList">FavouriteList</a></li><li><a href="global.html#FavouriteSet">FavouriteSet</a></li><li><a href="global.html#OffersContainer">OffersContainer</a></li><li><a href="global.html#store">store</a></li></ul></div>
                
            </nav>
        </div>
        <div class="core" id="main-content-wrapper">
            <div class="content">
                <header class="page-title">
                    <p>Source</p>
                    <h1>Components/Cars.js</h1>
                </header>
                



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {Component} from 'react';
import styled from 'styled-components';
import {connect} from 'react-redux';
import SpeedOutlinedIcon from '@material-ui/icons/SpeedOutlined';
import ColorLensOutlinedIcon from '@material-ui/icons/ColorLensOutlined';
import LocalGasStationOutlinedIcon from '@material-ui/icons/LocalGasStationOutlined';
import SettingsOutlinedIcon from '@material-ui/icons/SettingsOutlined';
import BatteryFullIcon from '@material-ui/icons/Opacity';
import CheckIcon from '@material-ui/icons/Check';
import {NavLink} from "react-router-dom";
import {chooseId}from '../Actions/chooseOfferActions';
import FavouriteSet from './FavouriteSet';

const CarsContainer = styled.div`
  background-color:black;
  color:white;
  font-weight:600;
`;

const Car = styled.div`
  display:flex;
  flex-direction:column;
  padding-bottom: 16px;
  padding-top: 16px;
  padding-left: 2%;
  padding-right: 2%;
  @media (max-width: 500px) {
    padding-left: 0;
    padding-right: 0;
  }
`;

const CarList = styled.ul`
`;

const CarHeader = styled.section`
  display:flex;
  flex-direction:row;
`;

const CarLogo = styled.img`
  display:flex;
  flex-direction:row;
  background-color:white;
  width:112px;
  height:112px;
  @media (max-width: 480px) {
    width:80px;
    height:80px;
  }
  @media (max-width: 430px) {
    width:64px;
    height:64px;
  }
  @media (max-width: 390px) {
    width:112px;
    height:112px;
  }
`;

const CarDetails = styled.section`
`;

const CarHeaderText = styled.div`
  display:flex;
  flex-direction:row;
  width:100%;
  background-color:#3a3a3a;
  padding-left:16px;
  padding-right:16px;
  align-items: center;
  justify-content: space-between;
  @media (max-width: 550px) {
    padding-left:4px;
    padding-right:4px;
  }
  @media (max-width: 390px) {
    align-items: flex-start;
    flex-direction:column;
    padding-left:16px;
    padding-right:16px;
  }
`;

const CarHeaderMainText = styled.div`
  background-color:#3a3a3a;
  font-size:1.5em;
  @media (max-width: 520px) {
    font-size:1.3em;
  }
  @media (max-width: 420px) {
    font-size:1.2em;
  }
  @media (max-width: 390px) {
    font-size:1.3em;
    margin-bottom:4px;
  }
`;

const CarHeaderSubText = styled.div`
  font-size:1.2em;
  font-weight:300;
  @media (max-width: 390px) {
    margin-bottom:4px;
  }
`;

const CarHeaderTextRight = styled.div`
  display:flex;
  flex-direction:column;
  justify-content: center;
`;

const CarHeaderTextLeft = styled.div`
`;

const CarMain = styled.div`
  padding-top: 16px;
  display:grid;
  grid-template-columns:40% 60%;
  @media (max-width: 680px) {
    display:flex;
    flex-direction:column;
    padding-top: 0;
  }
`;

const CarPhoto = styled.img`
  width: 100%;
  margin-bottom: 8px;
`;

const CarMainDetailsLeft = styled.div`
  display:flex;
  flex-direction:column;
  justify-content:space-around;
  padding-left:32px;
  padding-right:32px;
  @media (max-width: 950px) {
    padding-left:8px;
    padding-right:8px;
  }
  @media (max-width: 700px) {
    padding-left:4px;
    padding-right:4px;
  }
`;

const CarMainDetailsRight = styled.div`
  display:flex;  
  flex-direction:column;
  justify-content:space-around;
  padding-left:32px;
  padding-right:32px;
  @media (max-width: 950px) {
    padding-left:8px;
    padding-right:8px;
  }
  @media (max-width: 700px) {
    padding-left:4px;
    padding-right:4px;
  }
`;

const CarDetailOrangeContainer = styled.div`
  width:100%;
  display:grid;
  grid-template-columns:50% 50%;
  justify-items: center;
  @media (max-width: 870px) {
    margin-top:8px;
  }
  @media (max-width: 680px) {
    justify-content: space-between;
  }
  @media (max-width: 320px) {
  }
`;

const CarFeatures = styled.div`
  display:grid;
  grid-template-columns:50% 50%;
  height:80%;
  @media (max-width: 350px) {
    grid-template-columns:45% 55%;
  }
  @media (max-width: 320px) {
    grid-template-columns:42% 58%;
  }
`;

const CarDetail = styled.div`
  display: flex;
  align-items: center;
  @media (max-width: 680px) {
    margin-bottom: 4px;
  }
`;

const CarDetailText = styled.div`
`;

const CarMainDetails = styled.div`
`;

const StyledSpeedOutlinedIcon = styled(SpeedOutlinedIcon)`
  background-color: #ec6b0c;
  padding: 8px;
  @media (max-width: 870px) {
    padding: 4px;
  }
`;

const StyledColorLensOutlinedIcon = styled(ColorLensOutlinedIcon)`
  background-color: #ec6b0c;
  padding: 8px;
  @media (max-width: 870px) {
    padding: 4px;
  }
`;

const StyledLocalGasStationOutlinedIcon = styled(LocalGasStationOutlinedIcon)`
  background-color: #ec6b0c;
  padding: 8px;
  @media (max-width: 870px) {
    padding: 4px;
  }
`;

const StyledSettingsOutlinedIcon = styled(SettingsOutlinedIcon)`
  background-color: #ec6b0c;
  padding: 8px;
  @media (max-width: 870px) {
    padding: 4px;
  }
`;

const StyledBatteryFullIcon = styled(BatteryFullIcon)`
  background-color: #ec6b0c;
  padding: 8px;
  @media (max-width: 870px) {
    padding: 4px;
  }
`;
const StyledCheckIcon = styled(CheckIcon)`
  background-color: #ec6b0c;
  padding: 8px;
  @media (max-width: 870px) {
    padding: 4px;
  }
`;

const StyledLink = styled(NavLink).attrs()`
  width:100%;
  text-decoration:none;
  color:white;
  cursor: pointer;
`;

const CarWithButtons = styled.li`
 border-bottom:2px solid #3a3a3a;
`;

/**
 * "Cars" component shows list of cars.
 */
class Cars extends Component {
  constructor(props) {
    super(props);
    this.state = {
      cars:[],
    };
    this.chooseId = this.chooseId.bind(this);
  }

  componentDidMount() {
    this.filterCars();
  }

  componentDidUpdate(){
    this.filterCars();
  }
/**
 * Mapping through this.props.cars, then list is sorted and states are updated.
 * 
 */
  filterCars(){
    let filteredArray=[];
    this.props.cars.forEach((car)=>{
      this.filterModel(car,filteredArray);
    });
    this.sort(filteredArray);
    this.updateList(filteredArray);
  }

  updateList(filteredArray){
    let prevState = JSON.stringify([...this.state.cars]); //strinigifing list before comparision
    let newState = JSON.stringify([...filteredArray]); //strinigifing list before comparision
    if(prevState!==newState){ //comparing stringified lists, if nothing new, states aren't updated
      this.setState({ cars: filteredArray});
    }
  }

  sort(filteredArray){
    if(this.props.priceSort.priceSort==="Ascending")
    filteredArray.sort((a, b) => (a.price > b.price) ? 1 : -1)
    if(this.props.priceSort.priceSort==="Descending")
    filteredArray.sort((a, b) => (a.price &lt; b.price) ? 1 : -1)
  }

  filterModel(car, filteredArray){
    if(this.props.maker.maker===car.brand || this.props.maker.maker==="Any Maker") {
      if(this.props.chosenModel.chosenModel===car.model || this.props.chosenModel.chosenModel==="Any Model"){
        if((this.props.choosenPower.maxPower>=car.power || this.props.choosenPower.maxPower===null)&amp;&amp;(this.props.choosenPower.minPower&lt;=car.power || this.props.choosenPower.minPower===null)){
          if((this.props.choosenYear.maxYear>=car.year || this.props.choosenYear.maxYear===null) &amp;&amp; (this.props.choosenYear.minYear&lt;=car.year || this.props.choosenYear.minYear===null)){
            if((this.props.choosenPrice.maxPrice>=car.price || this.props.choosenPrice.maxPrice===null) &amp;&amp; (this.props.choosenPrice.minPrice&lt;=car.price || this.props.choosenPrice.minPrice===null)){
              filteredArray.push(car); //push new car to the list after filtering
            }
          }
        } 
      }
    }
  }
/**
 * Update choosen id of a car.
 * @param {number} e  car id
 */
  chooseId(e){
    this.props.chooseId(e); 
  }

  render() {
    return (  
      &lt;CarsContainer>
        &lt;CarList>
          {this.state.cars.map(car =>&lt;CarWithButtons key={car.id}>
            &lt;StyledLink to={{ pathname: '/Offer/Vehicle-Features/'+car.id}}>&lt;Car onClick={() => this.chooseId(car.id)}>
            &lt;CarHeader>
              &lt;CarLogo src={car.imageLogo}>&lt;/CarLogo>
              &lt;CarHeaderText>
                &lt;CarHeaderTextRight>
                  &lt;CarHeaderMainText>{car.year} {car.brand} {car.model}&lt;/CarHeaderMainText>
                  &lt;CarHeaderSubText>{car.power} KM {car.displacement} cm3&lt;/CarHeaderSubText>
                &lt;/CarHeaderTextRight>
                &lt;CarHeaderTextLeft>
                  &lt;CarHeaderMainText>{car.price} PLN&lt;/CarHeaderMainText>
                &lt;/CarHeaderTextLeft>
              &lt;/CarHeaderText>
            &lt;/CarHeader>
            &lt;CarMain>
              &lt;CarPhoto src={car.image1}>&lt;/CarPhoto>
              &lt;CarMainDetails>
                &lt;CarFeatures>
                  &lt;CarMainDetailsLeft>
                    &lt;CarDetail>&lt;StyledSpeedOutlinedIcon>&lt;/StyledSpeedOutlinedIcon>&lt;CarDetailText>&amp;nbsp;{car.mileage} km&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledColorLensOutlinedIcon>&lt;/StyledColorLensOutlinedIcon>&lt;CarDetailText>&amp;nbsp;{car.color}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledBatteryFullIcon>&lt;/StyledBatteryFullIcon>&lt;CarDetailText>&amp;nbsp;{car.fuel}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledSettingsOutlinedIcon>&lt;/StyledSettingsOutlinedIcon>&lt;CarDetailText>&amp;nbsp;{car.gearBox}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledLocalGasStationOutlinedIcon >&lt;/StyledLocalGasStationOutlinedIcon >&lt;CarDetailText>&amp;nbsp;{car.fuelConsumption}&lt;/CarDetailText>&lt;/CarDetail>
                  &lt;/CarMainDetailsLeft>
                  &lt;CarMainDetailsRight>
                    &lt;CarDetail>&lt;StyledCheckIcon>&lt;/StyledCheckIcon>&lt;CarDetailText>&amp;nbsp;{car.feature1}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledCheckIcon>&lt;/StyledCheckIcon>&lt;CarDetailText>&amp;nbsp;{car.feature2}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledCheckIcon>&lt;/StyledCheckIcon>&lt;CarDetailText>&amp;nbsp;{car.feature3}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledCheckIcon>&lt;/StyledCheckIcon>&lt;CarDetailText>&amp;nbsp;{car.feature4}&lt;/CarDetailText>&lt;/CarDetail>
                    &lt;CarDetail>&lt;StyledCheckIcon >&lt;/StyledCheckIcon >&lt;CarDetailText>&amp;nbsp;{car.feature5}&lt;/CarDetailText>&lt;/CarDetail>
                  &lt;/CarMainDetailsRight>
                &lt;/CarFeatures>
              &lt;/CarMainDetails>
            &lt;/CarMain>
            &lt;CarDetails>&lt;/CarDetails>
            &lt;/Car>
            &lt;/StyledLink>
            &lt;CarDetailOrangeContainer>
            &lt;FavouriteSet carId={car.id.toString(10)}  />
          &lt;/CarDetailOrangeContainer>&lt;/CarWithButtons>)}
        &lt;/CarList>
      &lt;/CarsContainer>
    );
  }
}

const mapStateToProps = state => ({
  maker: state.maker,
  chosenModel:state.chosenModel,
  power:state.power,
  choosenPower:state.choosenPower,
  years:state.years,
  choosenYear:state.choosenYear,
  price:state.price,
  choosenPrice:state.choosenPrice,
  cars:state.cars,
  priceSort:state.priceSort,
  id:state.chosenId
  }); 

  export default connect(mapStateToProps,{chooseId})(Cars);</code></pre>
        </article>
    </section>




            </div>
            
            <footer class="footer">
                <div class="content has-text-centered">
                    <p>Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a></p>
                    <p class="sidebar-created-by">
                        <a href="https://github.com/SoftwareBrothers/better-docs" target="_blank">BetterDocs theme</a> provided with <i class="fas fa-heart"></i> by 
                        <a href="http://softwarebrothers.co" target="_blank">SoftwareBrothers - JavaScript Development Agency</a>
                    </p>
                </div>
            </footer>
            
        </div>
        <div id="side-nav" class="side-nav">
        </div>
    </div>
<script src="scripts/app.min.js"></script>
<script>PR.prettyPrint();</script>
<script src="scripts/linenumber.js"> </script>

</body>
</html>
